"use strict";!function(a){a.fn.ciGuidedSearch=function(b){var c=this,d=a.extend({template:"",validateLabel:"Validate",choiceTypes:[],choices:[]},b);if(d.choiceTypes.length>0&&d.choices.length>0){var e=new Ractive({el:this,template:d.template}),f=function(){e.set("choiceTypes",d.choiceTypes),e.set("validateLabel",d.validateLabel),h(),i(),e.set("currentView","recap"),g(),setTimeout(function(){a(c).addClass("transition-enabled")},500),a(window).resize(function(a){g()})},g=function(b,d){a(c).css({"min-height":a(c).find(".view.active").height()})},h=function(a,b){var a=a||1,b=b||0;if("undefined"!=typeof e.get("currentChoices["+a+"]")&&e.set("currentChoices["+a+"]",null),1==a)e.set("currentChoices["+a+"]",{data:d.choices[b]}),h(a+1);else{var c=e.get("currentChoices["+(a-1)+"]");"undefined"!=typeof c&&"undefined"!=typeof c.data.choices&&(e.set("currentChoices["+a+"]",{data:c.data.choices[b],parent:c.data}),h(a+1))}},i=function(a){var a=a||1,b=e.get("currentChoices["+a+"]"),c=e.get("currentChoices["+(a+1)+"]");"undefined"!=typeof c&&c?i(a+1):"undefined"!=typeof b.data.url?e.set("currentURL",b.data.url):e.set("currentURL",null)};e.showChoiceSelector=function(a){var b=null;if(1==a)b=d.choices;else{var c=e.get("currentChoices["+(a-1)+"]");b="undefined"!=typeof c&&"undefined"!=typeof c.data.choices?c.data.choices:null}b&&(e.set("currentChoiceOptions",b),e.set("currentChoiceSelectorLevel",a),e.set("currentView","choiceSelector"),g())},e.selectChoice=function(a,b){h(e.get("currentChoiceSelectorLevel"),b),e.set("currentChoiceOptions",null),e.set("currentChoiceSelectorLevel",null),i(),e.set("currentView","recap"),g()},e.validate=function(){i();var a=e.get("currentURL");a&&(document.location=a)},f()}}}(jQuery);